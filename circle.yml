dependencies:
  pre:
    - sudo apt-get update
    - wget -O - -q https://github.com/ttsiodras/asn1scc/releases/download/3.2.81/asn1scc-bin-3.2.81.tar.gz | tar zxvf -
    - sudo apt-get install libxslt-dev libxml2-dev mono-complete python-antlr
    - pyenv install --skip-existing 2.7.11
    - wget -O - -q http://download.tuxfamily.org/taste/misc/antlr_python_runtime-3.1.3.tar.gz | tar zxvf -
    - cd antlr_python_runtime-3.1.3 && /opt/circleci/.pyenv/shims/pip2 install .
    - pyenv install --skip-existing 3.4.4
    - pyenv global 3.4.4

  override:
    - /opt/circleci/.pyenv/shims/pip3 install -r requirements.txt

test:
  override:
    - PATH=$PATH:$(pwd)/asn1scc make
